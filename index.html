<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ðŸ›’ Ä°kinciEl FiyatTakip - Otomatik Site Arama</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* MOBÄ°L UYUMLU STÄ°LLER */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        body { background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); min-height: 100vh; color: #333; }
        
        .container { max-width: 100%; padding: 15px; }
        
        /* Header */
        .header { text-align: center; color: white; padding: 20px 15px; }
        .header h1 { font-size: 1.6rem; margin-bottom: 5px; }
        .header p { opacity: 0.9; font-size: 0.9rem; }
        
        /* Arama Ã‡ubuÄŸu */
        .search-bar { background: rgba(255, 255, 255, 0.95); border-radius: 15px; padding: 20px; margin: 15px 0; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .search-input-group { display: flex; margin-bottom: 15px; }
        #mainSearch { flex: 1; padding: 15px; border: 2px solid #e0e0e0; border-radius: 10px 0 0 10px; font-size: 16px; }
        #searchButton { background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); color: white; border: none; padding: 0 25px; border-radius: 0 10px 10px 0; font-weight: bold; cursor: pointer; }
        
        /* Site Arama ButonlarÄ± */
        .site-search-buttons { display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 20px; }
        @media (min-width: 768px) { .site-search-buttons { grid-template-columns: repeat(3, 1fr); } }
        
        .site-search-btn { background: white; border: 2px solid transparent; border-radius: 10px; padding: 15px; text-align: center; cursor: pointer; transition: all 0.3s; }
        .site-search-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .site-search-btn.sahibinden { border-color: #ff6b35; }
        .site-search-btn.dolap { border-color: #00a8ff; }
        .site-search-btn.letgo { border-color: #9c27b0; }
        
        .site-icon { font-size: 30px; margin-bottom: 10px; }
        .site-search-btn.sahibinden .site-icon { color: #ff6b35; }
        .site-search-btn.dolap .site-icon { color: #00a8ff; }
        .site-search-btn.letgo .site-icon { color: #9c27b0; }
        
        .site-name { font-weight: bold; margin-bottom: 5px; }
        .site-desc { font-size: 0.85rem; color: #666; }
        
        /* HÄ±zlÄ± Aramalar */
        .quick-searches { margin: 20px 0; }
        .quick-search-title { color: white; margin-bottom: 15px; font-size: 1.1rem; text-align: center; }
        .quick-search-buttons { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .quick-btn { background: rgba(255, 255, 255, 0.2); border: 1px solid rgba(255, 255, 255, 0.3); color: white; padding: 10px 15px; border-radius: 20px; font-size: 14px; cursor: pointer; backdrop-filter: blur(10px); }
        
        /* Sekmeler */
        .tabs { display: flex; background: rgba(255, 255, 255, 0.95); border-radius: 15px; overflow: hidden; margin: 15px 0; }
        .tab { flex: 1; text-align: center; padding: 15px; cursor: pointer; border-bottom: 3px solid transparent; }
        .tab.active { border-bottom: 3px solid #6a11cb; font-weight: bold; color: #6a11cb; background: white; }
        
        /* Ä°Ã§erik */
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* ÃœrÃ¼n Ekleme Formu */
        .add-product-form { background: white; border-radius: 15px; padding: 20px; margin: 15px 0; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 500; color: #555; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 16px; }
        .form-group textarea { height: 100px; resize: vertical; }
        .form-actions { display: flex; gap: 10px; margin-top: 20px; }
        .btn { flex: 1; padding: 15px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }
        .btn-primary { background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); color: white; }
        .btn-secondary { background: #f5f5f5; color: #333; }
        
        /* ÃœrÃ¼n Listesi */
        .products-container { background: white; border-radius: 15px; padding: 20px; margin: 15px 0; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .product-card { border: 2px solid #e0e0e0; border-radius: 12px; padding: 15px; margin-bottom: 15px; }
        .product-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }
        .product-title { font-weight: 600; color: #333; font-size: 16px; }
        .product-price { font-size: 1.3rem; font-weight: 700; color: #00b894; }
        .product-meta { font-size: 0.85rem; color: #666; margin-bottom: 10px; }
        .product-source { display: inline-block; background: #eee; padding: 3px 10px; border-radius: 12px; font-size: 0.8rem; }
        .product-actions { display: flex; gap: 10px; margin-top: 10px; }
        .btn-small { padding: 8px 15px; border-radius: 8px; border: none; cursor: pointer; font-size: 14px; }
        .btn-view { background: #2575fc; color: white; text-decoration: none; }
        .btn-remove { background: #ffebee; color: #c62828; }
        
        /* Sepet */
        .cart-container { background: white; border-radius: 15px; padding: 20px; margin: 15px 0; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #eee; }
        .cart-item:last-child { border-bottom: none; }
        .cart-item-title { flex: 1; }
        .cart-item-price { font-weight: bold; color: #6a11cb; }
        .cart-total { text-align: right; margin-top: 15px; padding-top: 15px; border-top: 2px solid #eee; font-size: 1.3rem; font-weight: bold; color: #333; }
        
        /* Mesajlar */
        .message { padding: 15px; border-radius: 10px; margin: 10px 0; text-align: center; display: none; }
        .message.success { background: #e8f5e9; color: #2e7d32; }
        .message.error { background: #ffebee; color: #c62828; }
        .message.info { background: #e3f2fd; color: #1565c0; }
        
        /* Arama GeÃ§miÅŸi */
        .search-history { background: rgba(255, 255, 255, 0.95); border-radius: 15px; padding: 20px; margin: 15px 0; display: none; }
        .history-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; }
        .history-item:last-child { border-bottom: none; }
        .history-query { font-weight: 500; }
        .history-actions button { background: none; border: none; color: #2575fc; cursor: pointer; }
        
        /* Footer */
        .footer { text-align: center; color: white; padding: 20px; margin-top: 20px; font-size: 0.85rem; opacity: 0.8; }
        
        /* Kopyala Butonu */
        .copy-btn { background: #4CAF50; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <!-- BaÅŸlÄ±k -->
        <div class="header">
            <h1><i class="fas fa-search-dollar"></i> Ä°kinciEl FiyatTakip</h1>
            <p>FiyatTakip gibi ama ikinci el sitelerinde! â€¢ Otomatik site aÃ§ma</p>
        </div>
        
        <!-- Ana Arama -->
        <div class="search-bar">
            <div class="search-input-group">
                <input type="text" id="mainSearch" placeholder="Ã–rn: iPhone 13, RTX 3060, Samsung TV..." autocomplete="off">
                <button id="searchButton"><i class="fas fa-search"></i></button>
            </div>
            
            <p style="text-align: center; color: #666; font-size: 0.9rem; margin-bottom: 15px;">
                ÃœrÃ¼n adÄ±nÄ± yaz, sitelerde otomatik ara!
            </p>
            
            <!-- Site Arama ButonlarÄ± -->
            <div class="site-search-buttons">
                <div class="site-search-btn sahibinden" data-site="sahibinden">
                    <div class="site-icon"><i class="fas fa-store"></i></div>
                    <div class="site-name">Sahibinden'de Ara</div>
                    <div class="site-desc">TÃ¼rkiye'nin en bÃ¼yÃ¼ÄŸÃ¼</div>
                </div>
                
                <div class="site-search-btn dolap" data-site="dolap">
                    <div class="site-icon"><i class="fas fa-shopping-bag"></i></div>
                    <div class="site-name">Dolap'ta Ara</div>
                    <div class="site-desc">Giyim, elektronik</div>
                </div>
                
                <div class="site-search-btn letgo" data-site="letgo">
                    <div class="site-icon"><i class="fas fa-bolt"></i></div>
                    <div class="site-name">Letgo'da Ara</div>
                    <div class="site-desc">Yerel ilanlar</div>
                </div>
            </div>
            
            <!-- TÃ¼m Sitelerde Ara Butonu -->
            <button id="searchAllSites" style="width: 100%; margin-top: 15px; padding: 15px; background: linear-gradient(135deg, #00b09b, #96c93d); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">
                <i class="fas fa-rocket"></i> TÃœM SÄ°TELERDE ARA (3 Sekme AÃ§Ä±lÄ±r)
            </button>
        </div>
        
        <!-- HÄ±zlÄ± Aramalar -->
        <div class="quick-searches">
            <div class="quick-search-title">âš¡ HÄ±zlÄ± Aramalar</div>
            <div class="quick-search-buttons">
                <button class="quick-btn" data-query="iphone 13">ðŸ“± iPhone 13</button>
                <button class="quick-btn" data-query="rtx 3060">ðŸŽ® RTX 3060</button>
                <button class="quick-btn" data-query="macbook air">ðŸ’» MacBook</button>
                <button class="quick-btn" data-query="samsung tv">ðŸ“º TV</button>
                <button class="quick-btn" data-query="ps5">ðŸŽ® PS5</button>
                <button class="quick-btn" data-query="buzdolabÄ±">ðŸ§Š BuzdolabÄ±</button>
            </div>
        </div>
        
        <!-- Arama GeÃ§miÅŸi -->
        <div class="search-history" id="searchHistory">
            <h3 style="margin-bottom: 15px; color: #333;"><i class="fas fa-history"></i> Arama GeÃ§miÅŸi</h3>
            <div id="historyList"></div>
        </div>
        
        <!-- Mesaj AlanÄ± -->
        <div id="message" class="message"></div>
        
        <!-- Sekmeler -->
        <div class="tabs">
            <div class="tab active" data-tab="add">âž• ÃœrÃ¼n Ekle</div>
            <div class="tab" data-tab="products">ðŸ“¦ ÃœrÃ¼nlerim</div>
            <div class="tab" data-tab="cart">ðŸ›’ Sepetim</div>
        </div>
        
        <!-- 1. ÃœRÃœN EKLEME SEKmesi -->
        <div id="tab-add" class="tab-content active">
            <div class="add-product-form">
                <h3 style="margin-bottom: 20px; color: #333;">ðŸ“‹ BulduÄŸun ÃœrÃ¼nÃ¼ Ekle</h3>
                
                <div class="form-group">
                    <label><i class="fas fa-heading"></i> ÃœrÃ¼n AdÄ±</label>
                    <input type="text" id="productTitle" placeholder="Siteden bulduÄŸun Ã¼rÃ¼n adÄ±nÄ± yaz">
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-tag"></i> Fiyat (TL)</label>
                    <input type="number" id="productPrice" placeholder="Sitedeki fiyatÄ± yaz">
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-link"></i> ÃœrÃ¼n Linki</label>
                    <div style="display: flex; gap: 10px;">
                        <textarea id="productLink" placeholder="Siteden kopyaladÄ±ÄŸÄ±n linki yapÄ±ÅŸtÄ±r"></textarea>
                        <button class="copy-btn" onclick="pasteFromClipboard()" title="Panodan yapÄ±ÅŸtÄ±r">
                            <i class="fas fa-paste"></i>
                        </button>
                    </div>
                    <small style="color: #666; display: block; margin-top: 5px;">
                        <i class="fas fa-lightbulb"></i> Ä°pucu: Siteyi aÃ§ â†’ ÃœrÃ¼nÃ¼ bul â†’ Linki kopyala â†’ Buraya yapÄ±ÅŸtÄ±r
                    </small>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-store"></i> Site</label>
                    <select id="productSource">
                        <option value="sahibinden">Sahibinden</option>
                        <option value="dolap">Dolap</option>
                        <option value="letgo">Letgo</option>
                    </select>
                </div>
                
                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="clearForm()">
                        <i class="fas fa-eraser"></i> Temizle
                    </button>
                    <button class="btn btn-primary" onclick="addProduct()">
                        <i class="fas fa-plus-circle"></i> ÃœrÃ¼n Ekle
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 2. ÃœRÃœNLERÄ°M SEKmesi -->
        <div id="tab-products" class="tab-content">
            <div class="products-container">
                <h3 style="margin-bottom: 15px; color: #333;">ðŸ“¦ EklediÄŸim ÃœrÃ¼nler</h3>
                <div id="productsList">
                    <p id="noProductsMessage" style="text-align: center; color: #999; padding: 20px;">
                        HenÃ¼z Ã¼rÃ¼n eklemediniz. Ã–nce arama yapÄ±n, Ã¼rÃ¼n bulun, sonra ekleyin.
                    </p>
                </div>
            </div>
        </div>
        
        <!-- 3. SEPETÄ°M SEKmesi -->
        <div id="tab-cart" class="tab-content">
            <div class="cart-container">
                <h3 style="margin-bottom: 15px; color: #333;">ðŸ›’ Sepetim</h3>
                <div id="cartItems">
                    <p id="emptyCartMessage" style="text-align: center; color: #999; padding: 20px;">
                        Sepetiniz boÅŸ. ÃœrÃ¼n ekleyip sepete ekleyin.
                    </p>
                </div>
                <div id="cartTotal" class="cart-total"></div>
                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    <button class="btn btn-secondary" onclick="clearCart()" style="flex: 1;">
                        <i class="fas fa-trash"></i> Sepeti Temizle
                    </button>
                    <button class="btn btn-primary" onclick="checkout()" style="flex: 2;">
                        <i class="fas fa-shopping-cart"></i> SEPETÄ° TAMAMLA (Demo)
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p><i class="fas fa-mobile-alt"></i> Tam Mobil Uyumlu â€¢ <i class="fas fa-external-link-alt"></i> Otomatik Site AÃ§ma</p>
            <p style="font-size: 0.8rem; margin-top: 5px;">FiyatTakip gibi ama ikinci el iÃ§in â€¢ Backend gerekmez</p>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // ==================== VERÄ° DEPOLAMA ====================
        let myProducts = JSON.parse(localStorage.getItem('myProducts')) || [];
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let searchHistory = JSON.parse(localStorage.getItem('searchHistory')) || [];
        
        // ==================== SÄ°TE ARAMA URL'LERÄ° ====================
        const SITE_URLS = {
            sahibinden: (query) => `https://www.sahibinden.com/arama?query=${encodeURIComponent(query)}&sorting=price_asc`,
            dolap: (query) => `https://dolap.com/ara?q=${encodeURIComponent(query).replace(/%20/g, '+')}`,
            letgo: (query) => `https://www.letgo.com/tr-tr/arama?q=${encodeURIComponent(query).replace(/%20/g, '+')}`
        };
        
        // ==================== SAYFA YÃœKLENÄ°NCE ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Ana arama butonu
            document.getElementById('searchButton').addEventListener('click', performSearch);
            document.getElementById('mainSearch').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') performSearch();
            });
            
            // TÃ¼m sitelerde ara butonu
            document.getElementById('searchAllSites').addEventListener('click', function() {
                const query = document.getElementById('mainSearch').value.trim();
                if (query) searchAllSites(query);
            });
            
            // Site arama butonlarÄ±
            document.querySelectorAll('.site-search-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const site = this.getAttribute('data-site');
                    const query = document.getElementById('mainSearch').value.trim();
                    if (query) searchOnSite(site, query);
                });
            });
            
            // HÄ±zlÄ± arama butonlarÄ±
            document.querySelectorAll('.quick-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const query = this.getAttribute('data-query');
                    document.getElementById('mainSearch').value = query;
                    searchAllSites(query);
                });
            });
            
            // Sekme deÄŸiÅŸtirme
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`tab-${tabId}`).classList.add('active');
                    
                    if (tabId === 'products') loadProducts();
                    if (tabId === 'cart') loadCart();
                });
            });
            
            // Ä°lk yÃ¼kleme
            loadProducts();
            loadCart();
            loadSearchHistory();
            
            console.log('ðŸš€ Ä°kinciEl FiyatTakip hazÄ±r!');
        });
        
        // ==================== ANA ARAMA FONKSÄ°YONU ====================
        function performSearch() {
            const query = document.getElementById('mainSearch').value.trim();
            
            if (!query) {
                showMessage('LÃ¼tfen bir Ã¼rÃ¼n adÄ± yazÄ±n!', 'error');
                return;
            }
            
            // Arama geÃ§miÅŸine ekle
            addToSearchHistory(query);
            
            // Bilgi mesajÄ± gÃ¶ster
            showMessage(`"${query}" aranÄ±yor... Site butonlarÄ±na tÄ±klayÄ±n!`, 'info');
            
            // Arama geÃ§miÅŸini gÃ¶ster
            document.getElementById('searchHistory').style.display = 'block';
        }
        
        // ==================== TEK SÄ°TEDE ARA ====================
        function searchOnSite(site, query) {
            const url = SITE_URLS[site](query);
            const siteNames = {
                sahibinden: 'Sahibinden',
                dolap: 'Dolap',
                letgo: 'Letgo'
            };
            
            // Yeni sekmede aÃ§
            window.open(url, '_blank');
            
            // Mesaj gÃ¶ster
            showMessage(`${siteNames[site]} aÃ§Ä±ldÄ±: "${query}"`, 'success');
            
            // ÃœrÃ¼n ekleme formunu hazÄ±rla
            document.getElementById('productTitle').value = query;
            document.querySelector(`[data-tab="add"]`).click();
        }
        
        // ==================== TÃœM SÄ°TELERDE ARA ====================
        function searchAllSites(query) {
            if (!query) {
                showMessage('LÃ¼tfen bir Ã¼rÃ¼n adÄ± yazÄ±n!', 'error');
                return;
            }
            
            // Arama geÃ§miÅŸine ekle
            addToSearchHistory(query);
            
            // 3 siteyi de yeni sekmede aÃ§
            window.open(SITE_URLS.sahibinden(query), '_blank');
            window.open(SITE_URLS.dolap(query), '_blank');
            window.open(SITE_URLS.letgo(query), '_blank');
            
            // Mesaj gÃ¶ster
            showMessage(`3 sitede de "${query}" aranÄ±yor... Yeni sekmeler aÃ§Ä±ldÄ±!`, 'success');
            
            // ÃœrÃ¼n ekleme formunu hazÄ±rla
            document.getElementById('productTitle').value = query;
            document.querySelector(`[data-tab="add"]`).click();
            
            // Mobilde uyarÄ±
            if (/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                setTimeout(() => {
                    showMessage('ðŸ“± Ä°pucu: Siteyi aÃ§ â†’ ÃœrÃ¼n bul â†’ Linki kopyala â†’ "ÃœrÃ¼n Ekle" yap', 'info');
                }, 2000);
            }
        }
        
        // ==================== ARAMA GEÃ‡MÄ°ÅžÄ° ====================
        function addToSearchHistory(query) {
            // AynÄ± sorguyu tekrar ekleme
            if (searchHistory.includes(query.toLowerCase())) return;
            
            // En fazla 10 kayÄ±t
            searchHistory.unshift(query);
            if (searchHistory.length > 10) {
                searchHistory.pop();
            }
            
            localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
            loadSearchHistory();
        }
        
        function loadSearchHistory() {
            const container = document.getElementById('historyList');
            
            if (searchHistory.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999;">HenÃ¼z arama yapmadÄ±nÄ±z</p>';
                document.getElementById('searchHistory').style.display = 'none';
                return;
            }
            
            let html = '';
            searchHistory.forEach(query => {
                html += `
                    <div class="history-item">
                        <span class="history-query">${query}</span>
                        <div class="history-actions">
                            <button onclick="searchAllSites('${query}')" title="TÃ¼m sitelerde ara">
                                <i class="fas fa-search"></i>
                            </button>
                            <button onclick="useSearchQuery('${query}')" title="Arama kutusuna yaz">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            document.getElementById('searchHistory').style.display = 'block';
        }
        
        function useSearchQuery(query) {
            document.getElementById('mainSearch').value = query;
            document.getElementById('mainSearch').focus();
        }
        
        // ==================== ÃœRÃœN EKLEME ====================
        function addProduct() {
            const title = document.getElementById('productTitle').value.trim();
            const price = document.getElementById('productPrice').value;
            const link = document.getElementById('productLink').value.trim();
            const source = document.getElementById('productSource').value;
            
            if (!title || !price || !link) {
                showMessage('LÃ¼tfen tÃ¼m alanlarÄ± doldurun!', 'error');
                return;
            }
            
            const product = {
                id: Date.now(),
                title: title,
                price: parseInt(price),
                formattedPrice: parseInt(price).toLocaleString('tr-TR') + ' TL',
                link: link,
                source: source,
                date: new Date().toLocaleDateString('tr-TR'),
                addedAt: new Date().toISOString()
            };
            
            myProducts.push(product);
            saveProducts();
            
            clearForm();
            showMessage(`âœ… "${title}" baÅŸarÄ±yla eklendi!`, 'success');
            
            // ÃœrÃ¼nler sekmesine geÃ§
            setTimeout(() => {
                document.querySelector('[data-tab="products"]').click();
            }, 1000);
        }
        
        // ==================== PANODAN YAPIÅžTIR ====================
        async function pasteFromClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById('productLink').value = text;
                showMessage('Link panodan yapÄ±ÅŸtÄ±rÄ±ldÄ±!', 'success');
            } catch (error) {
                showMessage('Panodan okunamadÄ±. Linki manuel yapÄ±ÅŸtÄ±rÄ±n.', 'error');
            }
        }
        
        // ==================== DÄ°ÄžER FONKSÄ°YONLAR ====================
        function clearForm() {
            document.getElementById('productTitle').value = '';
            document.getElementById('productPrice').value = '';
            document.getElementById('productLink').value = '';
            document.getElementById('productSource').selectedIndex = 0;
        }
        
        function showMessage(text, type) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.className = `message ${type}`;
            messageEl.style.display = 'block';
            
            setTimeout(() => {
                messageEl.style.display = 'none';
            }, 3000);
        }
        
        // (Ã–nceki loadProducts, loadCart, toggleCart, removeProduct, clearCart, checkout fonksiyonlarÄ± aynÄ± kalacak)
        // Bu kÄ±sÄ±mlarÄ± Ã¶nceki koddan kopyala...
        
        function loadProducts() {
            const container = document.getElementById('productsList');
            if (myProducts.length === 0) {
                container.innerHTML = '<p id="noProductsMessage" style="text-align: center; color: #999; padding: 20px;">HenÃ¼z Ã¼rÃ¼n eklemediniz. Ã–nce arama yapÄ±n, Ã¼rÃ¼n bulun, sonra ekleyin.</p>';
                return;
            }
            
            const grouped = {
                sahibinden: myProducts.filter(p => p.source === 'sahibinden'),
                dolap: myProducts.filter(p => p.source === 'dolap'),
                letgo: myProducts.filter(p => p.source === 'letgo')
            };
            
            let html = '';
            
            if (grouped.sahibinden.length > 0) {
                html += `<h4 style="margin: 15px 0 10px 0; color: #555;"><i class="fas fa-store" style="color: #ff6b35;"></i> Sahibinden (${grouped.sahibinden.length})</h4>`;
                grouped.sahibinden.forEach(product => {
                    html += createProductCard(product);
                });
            }
            
            if (grouped.dolap.length > 0) {
                html += `<h4 style="margin: 15px 0 10px 0; color: #555;"><i class="fas fa-shopping-bag" style="color: #00a8ff;"></i> Dolap (${grouped.dolap.length})</h4>`;
                grouped.dolap.forEach(product => {
                    html += createProductCard(product);
                });
            }
            
            if (grouped.letgo.length > 0) {
                html += `<h4 style="margin: 15px 0 10px 0; color: #555;"><i class="fas fa-bolt" style="color: #9c27b0;"></i> Letgo (${grouped.letgo.length})</h4>`;
                grouped.letgo.forEach(product => {
                    html += createProductCard(product);
                });
            }
            
            container.innerHTML = html;
        }
        
        function createProductCard(product) {
            const borderColors = {
                sahibinden: '#ff6b35',
                dolap: '#00a8ff',
                letgo: '#9c27b0'
            };
            
            const inCart = cart.some(item => item.id === product.id);
            
            return `
                <div class="product-card" style="border-color: ${borderColors[product.source]};">
                    <div class="product-header">
                        <div class="product-title">${product.title}</div>
                        <div class="product-price">${product.formattedPrice}</div>
                    </div>
                    <div class="product-meta">
                        <i class="far fa-calendar"></i> ${product.date}
                    </div>
                    <span class="product-source">${product.source.toUpperCase()}</span>
                    <div class="product-actions">
                        <a href="${product.link}" target="_blank" class="btn-small btn-view">
                            <i class="fas fa-external-link-alt"></i> Ä°lana Git
                        </a>
                        <button class="btn-small ${inCart ? 'btn-remove' : 'btn-secondary'}" onclick="toggleCart(${product.id})">
                            <i class="fas ${inCart ? 'fa-trash' : 'fa-cart-plus'}"></i> ${inCart ? 'Sepetten Ã‡Ä±kar' : 'Sepete Ekle'}
                        </button>
                        <button class="btn-small" onclick="removeProduct(${product.id})" style="background: #ffebee; color: #c62828;">
                            <i class="fas fa-times"></i> Sil
                        </button>
                    </div>
                </div>
            `;
        }
        
        function loadCart() {
            const container = document.getElementById('cartItems');
            const totalEl = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                container.innerHTML = '<p id="emptyCartMessage" style="text-align: center; color: #999; padding: 20px;">Sepetiniz boÅŸ. ÃœrÃ¼n ekleyip sepete ekleyin.</p>';
                totalEl.innerHTML = '';
                return;
            }
            
            let html = '';
            let total = 0;
            
            cart.forEach(item => {
                total += item.price;
                html += `
                    <div class="cart-item">
                        <div class="cart-item-title">${item.title}</div>
                        <div class="cart-item-price">${item.formattedPrice}</div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            totalEl.innerHTML = `Toplam: <span style="color: #6a11cb;">${total.toLocaleString('tr-TR')} TL</span>`;
        }
        
        function toggleCart(productId) {
            const product = myProducts.find(p => p.id === productId);
            const existingIndex = cart.findIndex(item => item.id === productId);
            
            if (existingIndex > -1) {
                cart.splice(existingIndex, 1);
                showMessage(`"${product.title}" sepetten Ã§Ä±karÄ±ldÄ±`, 'success');
            } else {
                cart.push(product);
                showMessage(`"${product.title}" sepete eklendi`, 'success');
            }
            
            saveCart();
            loadProducts();
            loadCart();
        }
        
        function removeProduct(productId) {
            if (confirm('Bu Ã¼rÃ¼nÃ¼ silmek istediÄŸinize emin misiniz?')) {
                myProducts = myProducts.filter(p => p.id !== productId);
                cart = cart.filter(item => item.id !== productId);
                
                saveProducts();
                saveCart();
                loadProducts();
                loadCart();
                
                showMessage('ÃœrÃ¼n silindi', 'success');
            }
        }
        
        function clearCart() {
            if (cart.length === 0) {
                showMessage('Sepet zaten boÅŸ!', 'error');
                return;
            }
            
            if (confirm('Sepeti tamamen temizlemek istediÄŸinize emin misiniz?')) {
                cart = [];
                saveCart();
                loadProducts();
                loadCart();
                showMessage('Sepet temizlendi', 'success');
            }
        }
        
        function checkout() {
            if (cart.length === 0) {
                showMessage('Sepetiniz boÅŸ!', 'error');
                return;
            }
            
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            showMessage(`âœ… Demo SatÄ±n Alma: ${cart.length} Ã¼rÃ¼n â€¢ Toplam ${total.toLocaleString('tr-TR')} TL`, 'success');
            
            // Sepeti temizle
            setTimeout(() => {
                cart = [];
                saveCart();
                loadCart();
            }, 2000);
        }
        
        function saveProducts() {
            localStorage.setItem('myProducts', JSON.stringify(myProducts));
        }
        
        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }
        
        // ==================== Ã–RNEK VERÄ° EKLE ====================
        function addSampleData() {
            if (myProducts.length > 0) return;
            
            const samples = [
                {
                    id: 1,
                    title: "iPhone 13 128GB Siyah",
                    price: 18500,
                    formattedPrice: "18.500 TL",
                    link: "https://www.sahibinden.com/iphone-13-128gb",
                    source: "sahibinden",
                    date: "BugÃ¼n"
                },
                {
                    id: 2,
                    title: "NVIDIA RTX 3060 12GB",
                    price: 8500,
                    formattedPrice: "8.500 TL",
                    link: "https://dolap.com/rtx-3060-12gb",
                    source: "dolap",
                    date: "DÃ¼n"
                }
            ];
            
            myProducts = samples;
            saveProducts();
            loadProducts();
            showMessage('Ã–rnek veriler eklendi. Kendi Ã¼rÃ¼nlerini ekleyebilirsin!', 'success');
        }
        
        // Sayfa aÃ§Ä±ldÄ±ÄŸÄ±nda Ã¶rnek veri ekle (isteÄŸe baÄŸlÄ±)
        setTimeout(addSampleData, 1000);
    </script>
</body>
</html>
